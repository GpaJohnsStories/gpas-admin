<!DOCTYPE html>
<html lang="en">
<head>

  <!-- ============================================================ 
       AUTHENTICATION GATE
       ------------------------------------------------------------
       This runs immediately when the page loads.
       If the GitHub token is missing, the user is redirected
       to the login page BEFORE anything renders.
       ============================================================ -->
 <script>
  /*
    AUTHENTICATION GATE WITH RETURN-TO SUPPORT

    - Runs immediately when the page loads
    - If no GitHub token is present:
        • Save the current page path
        • Redirect to the login screen
    - Login page will send the user back here after success
  */

  const token = sessionStorage.getItem("githubToken");

  if (!token) {
    sessionStorage.setItem("returnTo", window.location.pathname);
    window.location.href = "../index.html";
  }
</script>


  <meta charset="UTF-8">
  <meta name="google" content="notranslate">
  <title>GPA'S FAITH — CONTENT CREATOR</title>

</head>

<body
  style="
    margin:0;
    padding:0;
    font-family:'Lexend', sans-serif;
    font-size:18px;      /* 14pt equivalent for admin UI density */
    background-color:#fff2cc;;
  "
>

  <!-- ============================================================
       ADMIN MENU (LOADED VIA IFRAME)
       ------------------------------------------------------------
       The admin menu:
       - Handles site selection
       - Sets selectedSite / selectedRepo in sessionStorage
       - Does NOT know which page it is embedded in
       - Loads asynchronously
       ============================================================ -->
  <iframe
    id="adminMenuFrame"
    title="Admin Menu"
    style="
      width:1260px;
      height:70px;
      border:none;
      display:block;
      position:sticky;
      top:0;
      z-index:999;
      background-color:#fff2cc;
      margin:0 auto 5px auto;
      overflow:hidden;
    ">
  </iframe>

  <!-- Always load the newest version of the admin menu -->
  <script>
    document.getElementById("adminMenuFrame").src =
      "admin-menu.html?v=" + Date.now();
  </script>

 <!-- ============================================================
     TABLE 1 (FRAMEWORK ONLY)
     ------------------------------------------------------------
     Row 0 is a "width-lock" row (height 0) so later rows do NOT
     need to carry width information in every <td>.
     ============================================================ -->

<table
  id="faithLibTable1"
  style="
    width:1258px;                 /* 100+200+4+100+400+4+150+150+150 */
    margin-left:auto;
    margin-right:auto;
    border-collapse:collapse;
    border:1px solid #999;
  "
>
  <tbody>

    <!-- ========================================================
         Row 0  (HEIGHT = 0px)
         --------------------------------------------------------
         - ALL <td> elements are on ONE LINE each (per request)
         - Each <td> includes width AND height:0px AND border
         - Purpose is to lock column widths
         ======================================================== -->
    <tr style="height:0px;">
      <td style="width:100px; height:0px; border:1px solid #999; padding:0;"></td><!-- Row 0, Col 1 -->
      <td style="width:200px; height:0px; border:1px solid #999; padding:0;"></td><!-- Row 0, Col 2 -->
      <td style="width:4px; height:0px; border:1px solid #999; padding:0;"></td><!-- Row 0, Col 3 -->
      <td style="width:100px; height:0px; border:1px solid #999; padding:0;"></td><!-- Row 0, Col 4 -->
      <td style="width:400px; height:0px; border:1px solid #999; padding:0;"></td><!-- Row 0, Col 5 -->
      <td style="width:4px; height:0px; border:1px solid #999; padding:0;"></td><!-- Row 0, Col 6 -->
      <td style="width:150px; height:0px; border:1px solid #999; padding:0;"></td><!-- Row 0, Col 7 -->
      <td style="width:150px; height:0px; border:1px solid #999; padding:0;"></td><!-- Row 0, Col 8 -->
      <td style="width:150px; height:0px; border:1px solid #999; padding:0;"></td><!-- Row 0, Col 9 -->
    </tr>

    <!-- ========================================================
         Row 1  (HEIGHT = 50px)
         --------------------------------------------------------
         - Framework row only
         - Cells intentionally EMPTY
         - Uses your preferred <td> comment pattern
         ======================================================== -->
    <tr style="height:50px;">

      <td
        style="
        border:1px solid #999;
        background-color:#2563eb;
        color:#ffffff;
        text-align:right;
        vertical-align:middle;
        font-weight:700;
        font-size:18px;
        padding-right:10px;
          "><!-- Row 1, Col 1 -->
            CATE<br>
            GORY:
        </td>

      <td style="border:1px solid #999;"><!-- Row 1, Col 2 -->
      </td>

       <td style="border:1px solid #999;"><!-- Row 1, Col 3 -->
      </td>
 
      <td style="border:1px solid #999;"><!-- Row 1, Col 4 -->
      </td>

      <td style="border:1px solid #999;"><!-- Row 1, Col 5 -->
      </td>

      <td style="border:1px solid #999;"><!-- Row 1, Col 6 -->
      </td>

      <td style="border:1px solid #999;"><!-- Row 1, Col 7 -->
      </td>

      <td style="border:1px solid #999;"><!-- Row 1, Col 8 -->
      </td>

      <td style="border:1px solid #999;"><!-- Row 1, Col 9 -->
      </td>

    </tr>

  </tbody>
</table>
  <div
    style="
      width:1200px;
      margin:0 auto;
    ">
    <!-- Faith library creation tables will go here -->
  </div>

 <script>
  /*
    FAITH SITE ENFORCEMENT

    Page classification:
      • Single-site admin page
      • Writes content ONLY to the FAITH repo
      • Must never operate under another site context

    How this works:
      - Admin menu loads asynchronously in an iframe
      - Menu sets selectedSite / selectedRepo in sessionStorage
      - This script waits until those values exist
      - If the site is not FAITH:
          • Force FAITH + gpasfaith
          • Reload so the menu reflects the change
  */

  (function enforceFaithContext() {

    const REQUIRED_SITE = "FAITH";
    const REQUIRED_REPO = "gpasfaith";

    let attempts = 0;
    const MAX_ATTEMPTS = 20;

    const interval = setInterval(() => {

      const site = sessionStorage.getItem("selectedSite");
      const repo = sessionStorage.getItem("selectedRepo");

      // Wait until the admin menu has initialized
      if (!site || !repo) {
        attempts++;
        if (attempts > MAX_ATTEMPTS) clearInterval(interval);
        return;
      }

      clearInterval(interval);

      // Enforce FAITH context if needed
      if (site !== REQUIRED_SITE) {
        sessionStorage.setItem("selectedSite", REQUIRED_SITE);
        sessionStorage.setItem("selectedRepo", REQUIRED_REPO);
        window.location.reload();
      }

      // If already FAITH, do nothing

    }, 100);

  })();
</script>
  
</body>
</html>
